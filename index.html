<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TikTok Hook Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f0f0f;
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 24px;
    }
    .app {
      width: 100%;
      max-width: 520px;
      padding: 24px;
      background: #151515;
      border-radius: 12px;
      box-shadow: 0 0 40px rgba(0,0,0,0.6);
    }
    h1 { font-size: 24px; margin: 0 0 12px; }

    .desc {
      margin: 0 0 16px;
      font-size: 14px;
      line-height: 1.5;
      color: #cccccc;
    }

    textarea {
      width: 100%;
      height: 70px;
      background: #0f0f0f;
      color: #fff;
      border: 1px solid #333;
      border-radius: 8px;
      padding: 10px;
      resize: none;
      font-size: 14px;
      outline: none;
    }
    button {
      margin-top: 12px;
      width: 100%;
      padding: 12px;
      background: #ffffff;
      color: #000;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }
    button:disabled { opacity: 0.6; cursor: not-allowed; }
    .hooks { margin-top: 20px; }
    .hook {
      background: #0f0f0f;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 14px;
      border: 1px solid #222;
    }
    .copy {
      margin-top: 10px;
      background: #2a2a2a;
      color: #fff;
    }
    .status {
      margin-top: 10px;
      font-size: 13px;
      opacity: 0.9;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .status.error { color: #ff6b6b; }
  </style>
</head>
<body>
  <div class="app">
    <h1>TikTok Hook Generator</h1>

    <p class="desc">
      TikTok hooks decide whether people watch or scroll.
      Enter your video topic and get <b>10 high-converting hooks</b>
      designed to grab attention in the first 3 seconds.
      <br><br>
      Perfect for creators, coaches, marketers, and anyone posting daily content.
      <br><br>
      <b>Why this tool works better than others:</b><br>
      • Built specifically for TikTok hooks — not generic AI text<br>
      • Gives multiple hook angles in one click<br>
      • No prompts, no setup, no thinking — just results
    </p>

    <textarea id="topic" placeholder="Enter video topic..."></textarea>
    <button id="genBtn" onclick="generateHooks()">Generate hooks</button>

    <div class="status" id="status"></div>
    <div class="hooks" id="hooks"></div>

    <button class="copy" onclick="copyHooks()">Copy all hooks</button>
  </div>

  <script>
    function renderHooks(hooks) {
      const container = document.getElementById("hooks");
      container.innerHTML = "";
      hooks.forEach(h => {
        const div = document.createElement("div");
        div.className = "hook";
        div.textContent = h;
        container.appendChild(div);
      });
    }

    async function generateHooks() {
      const topic = document.getElementById("topic").value.trim();
      const status = document.getElementById("status");
      const btn = document.getElementById("genBtn");

      status.className = "status";
      status.textContent = "";
      renderHooks([]);

      if (!topic) {
        status.className = "status error";
        status.textContent = "Please enter a topic.";
        return;
      }

      btn.disabled = true;
      status.textContent = "Generating…";

      try {
        const resp = await fetch("/api/hooks", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ topic })
        });

        const data = await resp.json().catch(() => ({}));

        if (!resp.ok) {
          status.className = "status error";
          status.textContent =
            "API ERROR\n" +
            (data.status ? `Status: ${data.status}\n` : "") +
            (data.error ? `Error: ${data.error}\n` : "") +
            (data.details ? `Details: ${String(data.details).slice(0,300)}` : "No details");
          return;
        }

        const hooks = Array.isArray(data.hooks) ? data.hooks : [];
        if (!hooks.length) {
          status.className = "status error";
          status.textContent = "No hooks returned.";
          return;
        }

        status.textContent = "";
        renderHooks(hooks);

      } catch (e) {
        status.className = "status error";
        status.textContent = "NETWORK ERROR\n" + String(e);
      } finally {
        btn.disabled = false;
      }
    }

    async function copyHooks() {
      const hooks = document.querySelectorAll(".hook");
      if (!hooks.length) return alert("Nothing to copy.");
      let text = "";
      hooks.forEach(h => text += h.textContent + "\n");
      await navigator.clipboard.writeText(text);
      alert("Hooks copied");
    }
  </script>
</body>
</html>
